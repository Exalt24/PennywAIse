{% load static %}

<aside
  id="sidebar"
  class="sidebar bg-[#8B0F13] text-white transition-all duration-300 ease-in-out w-64 flex flex-col"
>
      <section class="flex items-center justify-between px-4 py-3">
    <a href="{% url 'budget:index' %}" class="flex items-center space-x-2">
      <img src="{% static 'images/logo3.png' %}"
           alt="PennywAIse logo"
           class="h-8 w-auto logo-image" />
    </a>
    <button id="sidebarToggle" class="focus:outline-none">
      <!-- arrow pointing left -->
      <svg xmlns="http://www.w3.org/2000/svg"
           class="h-6 w-6 transform transition-transform duration-300"
           fill="none"
           viewBox="0 0 24 24"
           stroke="currentColor">
        <path stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7" />
      </svg>
    </button>
  </section>
  <button id="addEntryBtn" class="create mx-4 my-2 flex items-center justify-center">
    <img src="{% static 'images/plus.png' %}" class="w-4 h-4 btn-image" alt="Add Entry Icon"/>
    <span class="btn-text ml-2">Add Entry</span>
  </button>
    <nav class="mt-4 flex-1 space-y-1">
      {% for item in nav_items %}
        <a href="{{ item.href }}" class="nav-sidebar flex items-center px-4 py-2 space-x-2">
          <img src="{% static item.icon %}" class="w-6 h-6" alt="{{ item.label }}"/>
          <span class="link-text">{{ item.label }}</span>
        </a>
      {% endfor %}
    </nav>
</aside>

<script>
    document.addEventListener('DOMContentLoaded', () => {
      const links = document.querySelectorAll('.nav-sidebar');
  
      function updateActive() {
        const hash = window.location.hash || '#dashboard';
        links.forEach(link => {
          if (link.getAttribute('href') === hash) {
            link.setAttribute('aria-current', 'page');
          } else {
            link.removeAttribute('aria-current');
          }
        });
      }
  
      // Run on load...
      updateActive();
      // ...and whenever the hash in the URL changes
      window.addEventListener('hashchange', updateActive);
      
      // (Optional) If you want clicks to update immediately without waiting for the hashchange:
      links.forEach(link => {
        link.addEventListener('click', () => {
          // small timeout so the browser updates location.hash first
          setTimeout(updateActive, 0);
        });
      });
    });
  </script>
  