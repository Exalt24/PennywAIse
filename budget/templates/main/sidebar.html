{% load static %}

<aside class="sidebar">
    <a href="{% url 'budget:index' %}" class="logo block mb-6">
        <img
        src="{% static 'images/logo3.png' %}"
        alt="PennywAIse logo"
        class="h-12 w-auto"
        />
    </a>
    <button id="addEntryBtn" class="create">+ Add Entry</button>
    <nav>
        <a
          href="#dashboard"
          aria-current="page"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/dashboard.png' %}"
            alt="Dashboard"
            class="w-6 h-6"
          />
          <span>Dashboard</span>
        </a>
      
        <a
          href="#categories"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/categories.png' %}"
            alt="Categories"
            class="w-6 h-6"
          />
          <span>Categories</span>
        </a>
      
        <a
          href="#income"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/income.png' %}"
            alt="Income"
            class="w-6 h-6"
          />
          <span>Income</span>
        </a>
      
        <a
          href="#expenses"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/expense.png' %}"
            alt="Expenses"
            class="w-6 h-6"
          />
          <span>Expenses</span>
        </a>
      
        <a
          href="#budgets"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/budget.png' %}"
            alt="Budgets"
            class="w-6 h-6"
          />
          <span>Budgets</span>
        </a>
      
        <a
          href="#reports"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/reports.png' %}"
            alt="Reports"
            class="w-6 h-6"
          />
          <span>Reports</span>
        </a>
      
        <a
          href="#ai"
          class="nav-sidebar"
        >
          <img
            src="{% static 'images/convo.png' %}"
            alt="AI Assistant"
            class="w-6 h-6"
          />
          <span>AI Assistant</span>
        </a>
      </nav>      
</aside>

<script>
    document.addEventListener('DOMContentLoaded', () => {
      const links = document.querySelectorAll('.nav-sidebar');
  
      function updateActive() {
        const hash = window.location.hash || '#dashboard';
        links.forEach(link => {
          if (link.getAttribute('href') === hash) {
            link.setAttribute('aria-current', 'page');
          } else {
            link.removeAttribute('aria-current');
          }
        });
      }
  
      // Run on load...
      updateActive();
      // ...and whenever the hash in the URL changes
      window.addEventListener('hashchange', updateActive);
      
      // (Optional) If you want clicks to update immediately without waiting for the hashchange:
      links.forEach(link => {
        link.addEventListener('click', () => {
          // small timeout so the browser updates location.hash first
          setTimeout(updateActive, 0);
        });
      });
    });
  </script>
  