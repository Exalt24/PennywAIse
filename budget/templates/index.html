{% extends "base.html" %} {% load static %} {% block title %}Home{% endblock %}
{% block content %}
<section id="home" role="region" aria-label="Home" class="hero-section">

  

  <figure class="absolute inset-0" aria-hidden="true">
    <span class="circle1"></span>
    <span class="circle2"></span>
    <span class="circle3"></span>
    <span class="circle4"></span>
    <span class="circle5"></span>
  </figure>

  <article class="hero-details">
    <section class="hero-layout">
      <h1 class="hero-title">PennywAIse</h1>
      <p class="hero-description">
        Take control of your spending and save for what matters most. Sign up
        and start tracking your budget in seconds.
      </p>
      <section class="hero-button-layout">
        {% if user.is_authenticated %}
          <a href="{% url 'budget:dashboard' %}" class="button-dark">
            Go to Dashboard
          </a>
        {% else %}
          <a href="/auth?form=register" class="button-dark">
            Register
          </a>
          <a href="#about" class="button-outline">
            Learn More
          </a>
        {% endif %}
      </section>
    </section>
  </article>
</section>

<!-- About Section -->
<section
  id="about"
  role="region"
  aria-label="About PennywAise"
  class="about-section"
>
  <article class="about-article">
    <h2 class="about-title">About PennywAise</h2>
    <p class="about-details">
      PennywAise is your all-in-one personal finance assistant. From the moment
      you link your accounts, it automatically categorizes every transaction—so
      you can see exactly where your money is going without lifting a finger.
      Set custom budgets for groceries, bills, entertainment or anything else,
      and get real-time alerts whenever you're approaching your limits. Want to
      save for a vacation, a new gadget, or an emergency fund? PennywAise's
      goal-tracker breaks down your target into manageable milestones, sends
      friendly reminders, and even suggests small adjustments you can make this
      week to stay on pace. Thousands of happy users have already taken control
      of their finances—reducing overspend by up to 30%, hitting savings targets
      months early, and finally feeling confident about their money. Ready to
      join them? Let PennywAise guide you to better spending, smarter saving,
      and greater financial peace of mind.
    </p>
  </article>
</section>

<!-- Features Section -->
<section
  id="features"
  role="region"
  aria-label="Key Features"
  class="feature-section"
>
  <article class="feature-article">
    <h2 class="feature-title">Features</h2>
    <ul class="feature-grid">
      <li>
        <article
          tabindex="0"
          role="region"
          aria-label="card"
          class="feature-card"
        >
          <img
            src="{% static 'images/sample.png' %}"
            alt="Icon"
            class="card-icon"
          />
          <section>
            <h3 class="card-title">Continue editing.</h3>
            <p class="card-details">
              Your new image will download as an SVG file…
            </p>
          </section>
        </article>
      </li>
      <li>
        <article
          tabindex="0"
          role="region"
          aria-label="card"
          class="feature-card"
        >
          <img
            src="{% static 'images/sample.png' %}"
            alt="Icon"
            class="card-icon"
          />
          <section>
            <h3 class="card-title">Continue editing.</h3>
            <p class="card-details">
              Your new image will download as an SVG file…
            </p>
          </section>
        </article>
      </li>
      <li>
        <article
          tabindex="0"
          role="region"
          aria-label="card"
          class="feature-card"
        >
          <img
            src="{% static 'images/sample.png' %}"
            alt="Icon"
            class="card-icon"
          />
          <section>
            <h3 class="card-title">Continue editing.</h3>
            <p class="card-details">
              Your new image will download as an SVG file…
            </p>
          </section>
        </article>
      </li>
      <!-- repeat <li><article> for cards 2 & 3 -->
    </ul>
  </article>
</section>

{% if not user.is_authenticated %}
  <!-- Contact Section -->
  <section
    id="contact"
    role="region"
    aria-label="Contact Us"
    class="py-20 bg-[#e7e4de]"
  >
    <article class="contact-x">
      <h2 class="contact-title">aren't you gonna say hello?</h2>
      <form
        method="post"
        action="#contact"
        role="form"
        aria-labelledby="contact-form-legend"
        class="space-y-6"
      >
        {% csrf_token %}
        <fieldset class="form-layout">
          <legend id="contact-form-legend" class="sr-only">Contact Form</legend>

          <label for="name" class="contact-label">Name</label>
          {{ contact_form.name }}
          {% if contact_form.name.errors %}
            <p id="error-name" class="error-label" role="alert">
              {{ contact_form.name.errors.0 }}
            </p>
          {% endif %}

          <label for="email" class="contact-label">Email</label>
          {{ contact_form.email }}
          {% if contact_form.email.errors %}
            <p id="error-email" class="error-label" role="alert">
              {{ contact_form.email.errors.0 }}
            </p>
          {% endif %}

          <label for="subject" class="contact-label">Subject</label>
          {{ contact_form.subject }}
          {% if contact_form.subject.errors %}
            <p id="error-subject" class="error-label" role="alert">
              {{ contact_form.subject.errors.0 }}
            </p>
          {% endif %}

          <label for="message" class="contact-label">Message</label>
          {{ contact_form.message }}
          {% if contact_form.message.errors %}
            <p id="error-message" class="error-label" role="alert">
              {{ contact_form.message.errors.0 }}
            </p>
          {% endif %}

          <div class="flex">
            <button
              type="submit"
              name="send-message"
              class="contact-button ml-auto"
            >
              Send Message
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-4 h-4 ml-2"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path d="M2 2l12 6-12 6 3-6-3-6z" />
              </svg>
            </button>
          </div>
        </fieldset>
      </form>
    </article>
  </section>
{% endif %}

<!-- Contact notification modal (always present) -->
<section
  id="notification-modal"
  role="alertdialog"
  aria-modal="true"
  aria-describedby="modal-message"
  aria-hidden="true"
  class="fixed inset-0 flex items-start mt-6 justify-center z-50 hidden"
>
  <article class="notif-container">
    <button
      id="close-modal"
      class="notif-close"
      aria-label="Close notification"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-4 w-4"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
    <figure class="flex items-center">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 mr-3 text-[#642828]"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M5 13l4 4L19 7"
        />
      </svg>
      <p id="modal-message" class="notif-message">
        Your message has been sent! We'll get back to you soon.
      </p>
    </figure>
  </article>
</section>
{% endblock %} {% block extra_js %}

<script>
  const navLinks = Array.from(document.querySelectorAll('.nav-link'));
  const sections = navLinks
    .map(link => document.getElementById(link.getAttribute('href').slice(1)))
    .filter(Boolean);
  const logoImage  = document.getElementById('logoImage');
  const userAuth = document.querySelector('.user-authenticated');

  // Preload or define your two logo URLs
  const homeLogoSrc  = "{% static 'images/logo3.png' %}";
  const otherLogoSrc = "{% static 'images/logo9.png' %}";

  function updateNav() {
    let currentSection = '';

    // figure out which section is in view
    sections.forEach(section => {
      const secTop = section.offsetTop - 80;
      if (window.pageYOffset >= secTop) {
        currentSection = section.getAttribute('id');
      }
    });

    // 1) Swap link text colors AND swap logo
    if (!currentSection || currentSection === 'home') {
      // Home styles
      navLinks.forEach(link => {
        link.classList.remove('text-[#40020F]');
        link.classList.add('text-white');
      });

      {% if user.is_authenticated %}
        userAuth.classList.remove('text-[#40020F]');
        userAuth.classList.add('text-white');
      {% endif %}
      logoImage.src = homeLogoSrc;
    } else {
      // Other-section styles
      navLinks.forEach(link => {
        link.classList.remove('text-white');
        link.classList.add('text-[#40020F]');
      });
      {% if user.is_authenticated %}
        userAuth.classList.remove('text-white');
        userAuth.classList.add('text-[#40020F]');
      {% endif %}
      logoImage.src = otherLogoSrc;
    }

    // 2) Underline the active link
    navLinks.forEach(link => {
      link.classList.remove('border-b-2', 'border-[#c3002d]');
      if (link.getAttribute('href') === `#${currentSection}`) {
        link.classList.add('border-b-2', 'border-[#c3002d]');
      }
    });
  }



  window.addEventListener('scroll', updateNav);
  window.addEventListener('load', updateNav);

  document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('notification-modal');
    const closeButton = document.getElementById('close-modal');

    {% if messages %}
      // Get the first message only
      var messageDisplayed = false;
      {% for message in messages %}
        if (!messageDisplayed) {
          document.getElementById('modal-message').textContent = "{{ message|escapejs }}";
          modal.classList.remove('hidden');

          setTimeout(function() {
            modal.classList.add('hidden');
          }, 5000);

          messageDisplayed = true;
        }
      {% endfor %}
    {% endif %}

    closeButton.addEventListener('click', function() {
      modal.classList.add('hidden');
    });
  });
</script>

{% endblock %}
